<head>
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script>
        AFRAME.registerComponent('modify-materials', {
            init: function () {
                // Wait for model to load.
                this.el.addEventListener('model-loaded', () => {
                    // Grab the mesh / scene.
                    const obj = this.el.getObject3D('mesh');
                    // Go over the submeshes and modify materials we want.
                    obj.traverse(node => {
                        // if (node.name.indexOf('ship') !== -1) {
                        // {
                        //     node.material.color.set('red');
                        // }
                        const anisotropyLevelZero = null;
                        const changeAnisotropy = false;
                        if (node.type !== "Bone" && typeof node.material !== 'undefined') {
                            console.log(node.material);
                            if (changeAnisotropy) {
                                if (node.material.map !== null && node.material.map !== 'undefined') {
                                    node.material.map.anisotropy = anisotropyLevelZero;
                                }
                                if (node.material.glossinessMap !== null && node.material.glossinessMap !== 'undefined') {
                                    node.material.glossinessMap.anisotropy = anisotropyLevelZero;
                                }
                                if (node.material.normalMap !== null && node.material.normalMap !== 'undefined') {
                                    node.material.normalMap.anisotropy = anisotropyLevelZero;
                                }

                                if (node.material.specularMap !== null && node.material.specularMap !== 'undefined')
                                    node.material.specularMap.anisotropy = anisotropyLevelZero;
                                console.log("Changed aniso for material " + node.material.name);
                            }
                        }
                    });
                });
            }
        });
    </script>
</head>
<body>

<a-scene background="color: #ECECEC">
    <a-assets>x
        <a-asset-item id="model"
                      src="models/Male_colored.glb"></a-asset-item>
    </a-assets>
    <a-entity position="0 0 -20"
              rotation="0 0 0"
              gltf-model="#model"
              scale="1 1 1"
              modify-materials></a-entity>

    <a-entity id="raptor-model3"
              class="dino-model"
              gltf-model="#triceratops"
              position="0 0 2.18"
              rotation="0 90 -90"
              scale="0.47 0.47 0.47"
              animation-state="stand-button"
              animation-mixer="clip: *; loop: repeat;"
              animation-control
              animation-timeline="track: 0; breaks: 0.0, 35.93, 36.93, 40.2, 41.2, 42.53">
    </a-entity>
</a-scene>
</body>